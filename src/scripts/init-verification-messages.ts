import { prisma } from '../lib/prisma'

/**
 * –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ –ë–î
 * –ó–∞–ø—É—Å–∫: npx tsx src/scripts/init-verification-messages.ts
 */

const verificationMessages = {
  ru: {
    verificationRequired: 'üìã *–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞*',
    whatIsVerification: '‚ùì *–ß—Ç–æ —Ç–∞–∫–æ–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è?*',
    verificationDescription: '–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è - —ç—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–∞—à–µ–π –ª–∏—á–Ω–æ—Å—Ç–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å–∏—Å—Ç–µ–º—ã. –ü–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º.',
    howToVerify: 'üìù *–ö–∞–∫ –ø—Ä–æ–π—Ç–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é?*',
    verifyStep1: '1Ô∏è‚É£ –°–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ',
    verifyStep2: '2Ô∏è‚É£ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ',
    verifyStep3: '3Ô∏è‚É£ –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è',
    verifyStep4: '4Ô∏è‚É£ –ü–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ',
    afterVerification: '‚úÖ –ü–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã.',
    connectionSuccessVerified: 'üéâ –í—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç –∏ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É.',
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    invalidParameters: '‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã',
    telegramAlreadyConnected: '‚ùå –≠—Ç–æ—Ç Telegram —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –¥—Ä—É–≥–æ–º—É –ª–æ–≥–∏–Ω—É',
    adminVerificationMessage: '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ BilimPoz Teacher.\n\n–ò–º—è: {name}\n–õ–æ–≥–∏–Ω: {login}\n\n–ü—Ä–æ—à—É –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –º–æ–π –∞–∫–∫–∞—É–Ω—Ç.',
  },
  kg: {
    verificationRequired: 'üìã *–ê–∫–∫–∞—É–Ω—Ç—Ç—ã —ã—Ä–∞—Å—Ç–æ–æ —Ç–∞–ª–∞–ø –∫—ã–ª—ã–Ω–∞—Ç*',
    whatIsVerification: '‚ùì *–´—Ä–∞—Å—Ç–æ–æ –¥–µ–≥–µ–Ω —ç–º–Ω–µ?*',
    verificationDescription: '–´—Ä–∞—Å—Ç–æ–æ - –±—É–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ç–∞—Ä–∞–±—ã–Ω–∞–Ω —Å–∏–∑–¥–∏–Ω –∂–µ–∫–µ –±–∞“£–≥–∏“£–∏–∑–¥–∏ —ã—Ä–∞—Å—Ç–æ–æ. –´—Ä–∞—Å—Ç–æ–æ–¥–æ–Ω –∫–∏–π–∏–Ω —Å–∏–∑ –±–∞—Ä–¥—ã–∫ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä–≥–∞ —Ç–æ–ª—É–∫ –º“Ø–º–∫“Ø–Ω—á“Ø–ª“Ø–∫ –∞–ª–∞—Å—ã–∑.',
    howToVerify: 'üìù *–´—Ä–∞—Å—Ç–æ–æ–Ω—É –∫–∞–Ω—Ç–∏–ø ”©—Ç“Ø“Ø –∫–µ—Ä–µ–∫?*',
    verifyStep1: '1Ô∏è‚É£ –¢”©–º”©–Ω–∫“Ø –±–∞—Å–∫—ã—á –∞—Ä–∫—ã–ª—É—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–µ–Ω–µ–Ω –±–∞–π–ª–∞–Ω—ã—à—ã“£—ã–∑',
    verifyStep2: '2Ô∏è‚É£ ”®–∑“Ø“£“Ø–∑ –∂”©–Ω“Ø–Ω–¥”© –º–∞–∞–ª—ã–º–∞—Ç –±–µ—Ä–∏“£–∏–∑',
    verifyStep3: '3Ô∏è‚É£ –´—Ä–∞—Å—Ç–æ–æ–Ω—É –∫“Ø—Ç“Ø“£“Ø–∑',
    verifyStep4: '4Ô∏è‚É£ –´—Ä–∞—Å—Ç–æ–æ–¥–æ–Ω –∫–∏–π–∏–Ω —Å–∏–∑ –±–∏–ª–¥–∏—Ä“Ø“Ø –∞–ª–∞—Å—ã–∑',
    afterVerification: '‚úÖ –´—Ä–∞—Å—Ç–æ–æ–¥–æ–Ω –∫–∏–π–∏–Ω —Å–∏–∑ —Å–∏—Å—Ç–µ–º–∞–Ω—ã–Ω –±–∞—Ä–¥—ã–∫ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã–Ω –∫–æ–ª–¥–æ–Ω–æ –∞–ª–∞—Å—ã–∑.',
    connectionSuccessVerified: 'üéâ –°–∞–π—Ç–∫–∞ –∫–∏—Ä–∏–ø, –∏—à—Ç–æ–æ–Ω—É –±–∞—à—Ç–∞–π –∞–ª–∞—Å—ã–∑.',
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    invalidParameters: '‚ùå –¢—É—É—Ä–∞ —ç–º–µ—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä',
    telegramAlreadyConnected: '‚ùå –ë—É–ª Telegram –±–∞—à–∫–∞ –ª–æ–≥–∏–Ω–≥–µ —Ç—É—Ç–∞—à—Ç—ã—Ä—ã–ª–≥–∞–Ω',
    adminVerificationMessage: '–°–∞–ª–∞–º–∞—Ç—Å—ã–∑–¥–∞—Ä–±—ã! –ú–µ–Ω BilimPoz Teacher —Å–∏—Å—Ç–µ–º–∞—Å—ã–Ω–∞ –∫–∞—Ç—Ç–∞–ª–¥—ã–º.\n\n–ê—Ç—ã: {name}\n–õ–æ–≥–∏–Ω: {login}\n\n–ê–∫–∫–∞—É–Ω—Ç—É–º–¥—É —Ç–µ–∫—à–µ—Ä–∏–ø, —ã—Ä–∞—Å—Ç–∞“£—ã–∑.',
  }
}

async function initVerificationMessages() {
  try {
    console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏...')
    
    const key = 'TELEGRAM_VERIFICATION_MESSAGES'
    const value = JSON.stringify(verificationMessages, null, 2)
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –∑–∞–ø–∏—Å—å
    const existing = await prisma.settings.findUnique({
      where: { key }
    })
    
    if (existing) {
      // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–ø–∏—Å—å
      await prisma.settings.update({
        where: { key },
        data: {
          value,
          updated_at: new Date()
        }
      })
      console.log('‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ –ë–î')
    } else {
      // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å
      await prisma.settings.create({
        data: {
          key,
          value
        }
      })
      console.log('‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î')
    }
    
    console.log('üìù –ö–ª—é—á:', key)
    console.log('üì¶ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON')
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:', error)
    throw error
  } finally {
    await prisma.$disconnect()
  }
}

// –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
if (require.main === module) {
  initVerificationMessages()
    .then(() => {
      console.log('‚ú® –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ')
      process.exit(0)
    })
    .catch((error) => {
      console.error('üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:', error)
      process.exit(1)
    })
}

export { initVerificationMessages, verificationMessages }

