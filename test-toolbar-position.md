# Расположение TestToolbar на странице

Описание позиционирования и структуры компонента TestToolbar на странице редактирования тестов.

---

## Расположение на странице

### Позиционирование

TestToolbar находится в фиксированной позиции внизу страницы, по центру горизонтально.

**Основные параметры позиционирования:**

- **Тип позиционирования**: Фиксированное (`fixed`)
- **Позиция по вертикали**: Внизу страницы, отступ 16px от нижнего края (`bottom-4`)
- **Позиция по горизонтали**: 
  - На маленьких экранах (до lg): По центру экрана (`left-[50%]`)
  - На больших экранах (lg и выше): По центру с учетом сайдбара (`lg:left-[calc(50%+80px)]`)
- **Центрирование**: Смещение влево на 50% своей ширины для точного центрирования (`-translate-x-1/2`)
- **Z-index**: 50 (`z-50`) - отображается поверх основного контента
- **Видимость**: Скрыт на маленьких экранах, виден только на больших экранах (`hidden lg:block`)

### Контекст расположения

TestToolbar находится между:
- Слева: Сайдбаром (если он есть)
- Справа: Кнопкой добавления теста (плавающее меню с типами тестов)

На больших экранах учитывается ширина сайдбара (80px), поэтому панель смещается вправо от центра на 80px, чтобы оставаться визуально по центру рабочей области.

---

## Структура компонента

### Внешний контейнер

```tsx
<div className="bg-[#151515] rounded-2xl border border-gray-700">
  <div className="flex items-center gap-2 p-4">
    {/* Кнопки инструментов */}
  </div>
</div>
```

**Стили внешнего контейнера:**
- **Background**: Темно-серый (#151515)
- **Border Radius**: 16px (округленные углы)
- **Border**: 1px серая граница (#374151)

**Стили внутреннего контейнера:**
- **Display**: Flexbox с горизонтальным расположением
- **Align Items**: Вертикальное центрирование элементов
- **Gap**: 8px между кнопками
- **Padding**: 16px со всех сторон

---

## Порядок кнопок в панели (слева направо)

1. **Жирный текст (Bold)**
   - Иконка: SVG буквы "B"
   - Размер: 16px × 16px
   - Цвет: Серый (#9CA3AF), при hover светло-серый

2. **Курсив (Italic)**
   - Иконка: SVG буквы "I"
   - Размер: 16px × 16px
   - Цвет: Серый, при hover светло-серый

3. **Зачеркнутый (Strikethrough)**
   - Иконка: SVG с линией
   - Размер: 16px × 16px
   - Цвет: Серый, при hover светло-серый

4. **Подчеркнутый (Underline)**
   - Иконка: SVG с подчеркиванием
   - Размер: 16px × 16px
   - Цвет: Серый, при hover светло-серый

5. **Разделитель**
   - Вертикальная линия
   - Высота: 24px
   - Цвет: Серый (#374151)
   - Отступы: 4px слева и справа

6. **Формула в строке (Inline Formula)**
   - Иконка: PiSigma (Σ)
   - Размер: 18px × 18px
   - Цвет: Серый, при hover светло-серый

7. **Формула в блоке (Block Formula)**
   - Иконка: PiFunction (f)
   - Размер: 18px × 18px
   - Цвет: Серый, при hover светло-серый

8. **Разделитель**
   - Вертикальная линия
   - Высота: 24px
   - Цвет: Серый
   - Отступы: 4px слева и справа

9. **AI кнопка (с выпадающим меню)**
   - Иконка: SVG звездочки/искры
   - Размер: 18px × 18px
   - Цвет: Серый, при hover светло-серый
   - При клике открывается выпадающее меню вверх с опцией "Картинка - LaTeX"

10. **Гибкий разделитель (flex-1)**
    - Занимает все доступное пространство между AI кнопкой и правыми кнопками

11. **Волшебная палочка (AI улучшение текста)**
    - Иконка: SVG волшебной палочки
    - Размер: 18px × 18px
    - Цвет: Фиолетовый (#A78BFA), при hover светло-фиолетовый
    - Отображается только если передан prop `onMagicWand`

12. **Кнопка превью/редактирования**
    - Иконка: Глаз (просмотр) или перечеркнутый глаз (редактирование)
    - Размер: 16px × 16px
    - Цвет: 
      - В режиме превью: Голубой (#60A5FA) с голубым фоном
      - В режиме редактирования: Серый, при hover светло-серый

---

## Размеры и отступы

**Внешний контейнер:**
- Padding: 0 (padding только у внутреннего контейнера)
- Border Radius: 16px
- Border: 1px

**Внутренний контейнер:**
- Padding: 16px со всех сторон (p-4)
- Gap между кнопками: 8px (gap-2)

**Кнопки:**
- Padding: 10px (p-2.5)
- Border Radius: 8px (rounded-lg)
- Hover background: Темно-серый (#1F2937)

**Разделители:**
- Ширина: 1px
- Высота: 24px
- Отступы: 4px слева и справа

---

## Поведение на разных размерах экрана

**Маленькие экраны (до lg, меньше 1024px):**
- Панель полностью скрыта (`hidden`)
- Не отображается на мобильных устройствах и планшетах

**Большие экраны (lg и выше, от 1024px):**
- Панель видна (`lg:block`)
- Позиционируется по центру с учетом сайдбара
- Все кнопки доступны и функциональны

---

## Взаимодействие с другими элементами

**Сайдбар (если есть):**
- На больших экранах учитывается ширина сайдбара (80px)
- Панель смещается вправо от центра на 80px

**Кнопка добавления теста:**
- Находится справа от панели инструментов
- Позиция: `fixed bottom-4 right-16`
- Не перекрывается с панелью инструментов

**Основной контент:**
- Панель отображается поверх контента благодаря `z-50`
- Не мешает прокрутке и взаимодействию с контентом
- Контент имеет отступ снизу (`pb-24`) для предотвращения перекрытия

---

## Выпадающее меню AI

При клике на кнопку AI открывается выпадающее меню:

**Позиционирование:**
- Направление: Вверх от кнопки (`bottom-full`)
- Горизонтальное выравнивание: По центру кнопки (`left-1/2 -translate-x-1/2`)
- Отступ от кнопки: 8px снизу (`mb-2`)

**Стили меню:**
- Background: Темно-серый (#1a1a1a)
- Border: 1px серая граница
- Border Radius: 8px
- Shadow: Большая тень
- Минимальная ширина: 200px
- Z-index: 9999 (поверх всех элементов)

**Опции меню:**
- "Картинка - LaTeX": Открывает модальное окно для загрузки изображения и конвертации в LaTeX

---

## Визуальное описание расположения

Панель инструментов находится в нижней части экрана, строго по центру (с учетом сайдбара на больших экранах). Она представляет собой горизонтальную полосу темно-серого цвета с округлыми углами, содержащую кнопки форматирования текста.

Слева расположены кнопки форматирования текста (жирный, курсив, зачеркнутый, подчеркнутый), затем кнопки для работы с формулами, затем AI кнопка с выпадающим меню, затем гибкий разделитель, и справа - кнопка волшебной палочки (если доступна) и кнопка переключения режима превью/редактирования.

Панель всегда видна на больших экранах и скрыта на маленьких, чтобы не мешать работе на мобильных устройствах.

